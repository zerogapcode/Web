<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Gallery - ProtonLab</title>
    <meta name="description" content="ProtonLab web projects gallery - Digital menus, interactive catalogs, and innovative web solutions" />
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Todos los estilos de galeria.html se mantienen exactamente igual */
        :root{
            --bg-light:#ffffff; --text-light:#000000; --muted-light:#6b7280; --panel-light:#f3f4f6;
            --bg-dark:#000000; --text-dark:#f0f0f0; --muted-dark:#888888; --panel-dark:#1a1a1a;
            --accent-dark:#e0e0f0; --max-width:1100px; 
            --mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;
            
            --card-bg-light: rgba(255, 255, 255, 0.01);
            --card-border-light: rgba(255, 255, 255, 0.1);
            --card-shadow-light: 0 8px 32px rgba(0, 0, 0, 0.03);
            
            --card-bg-dark: rgba(0, 0, 0, 0.08);
            --card-border-dark: rgba(255, 255, 255, 0.1);
            --card-shadow-dark: 0 8px 32px rgba(0, 0, 0, 0.3);
            
            --color-restaurant: rgba(255, 165, 80, 0.18);
            --color-technology: rgba(100, 180, 255, 0.18);
            --color-ecommerce: rgba(100, 220, 150, 0.18);
            --color-restaurant-border: rgba(255, 165, 80, 0.5);
            --color-technology-border: rgba(100, 180, 255, 0.5);
            --color-ecommerce-border: rgba(100, 220, 150, 0.5);
        }

        *{box-sizing:border-box; font-family: var(--mono);}
        body{margin:0;background:var(--bg-light);color:var(--text-light); overflow-x: hidden;}
        .wrap{max-width:var(--max-width);margin:0 auto;padding:36px 24px}
        
        header{
            position:fixed;
            left:0;
            right:0;
            top:0;
            display:flex;
            align-items:center;
            justify-content:space-between;
            padding:14px 20px;
            background:rgba(255,255,255,0.95);
            backdrop-filter:blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom:1px solid rgba(0,0,0,0.08);
            transition:transform .35s ease,opacity .35s ease;
            z-index:60;
            height: 70px;
            transform: translateZ(0);
            will-change: transform;
        }
        
        header.hidden{transform:translate3d(0, -110%, 0);opacity:0}
        
        .brand{display:flex;align-items:center;gap:12px}
        .brand .mini{
            font-weight:700;
            font-size:20px;
            letter-spacing:0.12em;
            color:#000000;
            cursor: pointer;
            transition: transform 0.3s ease, color 0.3s ease;
            user-select: none;
        }
        
        .brand .mini:hover{
            transform: scale(1.1);
            color: #333333;
        }
        
        .brand .mini:active{
            transform: scale(0.95);
        }

        nav {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .navlink {
            text-decoration: none;
            color: #000000;
            font-weight: 500;
            font-size: 14px;
            letter-spacing: 0.02em;
            transition: color 0.2s ease, transform 0.2s ease;
            position: relative;
            padding: 8px 0;
            white-space: nowrap;
        }
        
        .navlink:hover {
            color: #333333;
            transform: translateY(-1px);
        }
        
        .navlink::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #000000;
            transition: width 0.3s ease;
        }
        
        .navlink:hover::after {
            width: 100%;
        }

        .mode-toggle{display:flex;align-items:center;gap:6px}
        .seg{
            display:inline-flex;
            border-radius:999px;
            overflow:hidden;
            border:2px solid #000;
            background: rgba(0,0,0,0.03);
        }
        .seg button{
            padding:6px 10px;
            border:0;
            background:transparent;
            font-size: 11px;
            cursor:pointer;
            transition:background .2s,color .2s;
            border-radius:0;
            color:inherit;
            font-weight: 500;
            white-space: nowrap;
        }
        .seg button.active{background:rgba(0,0,0,0.08)}

        .hamburger {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 24px;
            height: 18px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 70;
        }
        
        .hamburger span {
            display: block;
            height: 2px;
            width: 100%;
            background-color: #000000;
            transition: all 0.3s ease;
            transform-origin: center;
        }
        
        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        
        .hamburger.active span:nth-child(2) {
            opacity: 0;
            transform: translateX(-10px);
        }
        
        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        main{padding-top:100px}
        .hero{min-height:60vh;display:flex;align-items:center}
        .hero-inner{
            width:100%;
            display:flex;
            flex-direction: column;
            align-items:flex-start;
            gap:36px;
        }
        @media (min-width: 768px) {
            .hero-inner {
                flex-direction: row;
            }
        }
        .hero-left{flex:1}
        .code-title{font-size:36px;line-height:1;letter-spacing:0.02em;color:inherit}
        @media (min-width: 768px) {
            .code-title {
                font-size: 44px;
            }
        }
        .code-title small{
            display:block;
            font-size:14px;
            margin-top:8px;
            color: var(--muted-light);
        }

        section{padding:60px 0;border-top:1px solid rgba(11,11,11,0.04)}
        @media (min-width: 768px) {
            section {
                padding: 80px 0;
            }
        }
        h2{font-size:20px;margin:0 0 12px; font-weight: 600;}
        p.lead{color:var(--muted-light);margin:0 0 18px; font-weight: 400;}
        
        .card{
            background: var(--card-bg-light);
            border-radius:16px;
            padding:24px;
            border:1px solid var(--card-border-light);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: var(--card-shadow-light);
            position: relative;
            overflow: hidden;
            transform: translateZ(0);
            will-change: transform;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.4) 50%, 
                rgba(255,255,255,0) 100%);
            z-index: 1;
        }
        
        .card:hover {
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
            transform: translate3d(0, -5px, 0);
            border-color: rgba(255, 255, 255, 0.4);
        }
        
        p {
            text-align: justify;
            text-justify: inter-word;
            line-height: 1.6;
        }
        
        .project-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-top: 40px;
        }
        @media (min-width: 768px) {
            .project-grid {
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            }
        }
        
        .project-card {
            background: var(--card-bg-light);
            border-radius: 16px;
            padding: 0;
            border: 1px solid var(--card-border-light);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            position: relative;
            overflow: hidden;
            box-shadow: var(--card-shadow-light);
            transform: translateZ(0);
            will-change: transform;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.4) 50%, 
                rgba(255,255,255,0) 100%);
            z-index: 1;
        }
        
        .project-card:hover {
            transform: translate3d(0, -8px, 0);
            box-shadow: 0 16px 40px rgba(0,0,0,0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .project-image {
            height: 200px;
            overflow: hidden;
            position: relative;
        }
        
        .project-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .project-card:hover .project-image img {
            transform: scale(1.08);
        }
        
        .project-content {
            padding: 24px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .project-content h3 {
            margin-top: 0;
            font-size: 18px;
            color: inherit;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .project-content p {
            text-align: justify;
            text-justify: inter-word;
            margin-bottom: 20px;
            flex-grow: 1;
        }
        
        .project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .project-tag {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .tag-restaurant {
            background: rgba(255, 165, 80, 0.2);
            color: #ffa550;
            border: 1px solid rgba(255, 165, 80, 0.3);
        }
        
        .tag-technology {
            background: rgba(100, 180, 255, 0.2);
            color: #64b4ff;
            border: 1px solid rgba(100, 180, 255, 0.3);
        }
        
        .tag-ecommerce {
            background: rgba(100, 220, 150, 0.2);
            color: #64dc96;
            border: 1px solid rgba(100, 220, 150, 0.3);
        }
        
        .project-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            text-decoration: none;
            color: inherit;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s ease;
            justify-content: center;
            text-align: center;
        }
        
        .project-link:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }
        
        footer{padding:80px 0;text-align:center;color:var(--muted-light);font-size:13px}
        
        .footer-pi {
            color: inherit;
            text-decoration: none;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
            font-style: normal;
            margin-left: 4px;
        }
        
        .footer-pi:hover {
            opacity: 1;
        }
        
        .back-button {
            display: inline-block;
            padding: 12px 32px;
            margin-top: 16px;
            border-radius: 999px;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            letter-spacing: 0.05em;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            text-align: center;
            color: rgba(0, 0, 0, 0.3);
            user-select: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .back-button:hover {
            transform: translateY(-2px);
            border-color: rgba(255, 255, 255, 0.4);
        }
        
        .back-button-wrapper {
            text-align: center;
            margin-top: 40px;
        }

        a.link-plain{text-decoration:none;color:inherit;cursor:pointer}
        a.link-plain:hover{text-decoration:none;color:inherit}

        body[data-theme='dark']{
            background:var(--bg-dark);
            color:var(--text-dark);
        }
        
        body[data-theme='dark'] header{
            background:rgba(0,0,0,0.95);
            border-bottom:1px solid rgba(255,255,255,0.1);
        }
        
        body[data-theme='dark'] .brand .mini {
            color: var(--text-dark);
        }
        
        body[data-theme='dark'] .brand .mini:hover {
            color: #ffffff;
        }
        
        body[data-theme='dark'] .navlink {
            color: var(--text-dark);
        }
        
        body[data-theme='dark'] .navlink:hover {
            color: #ffffff;
        }
        
        body[data-theme='dark'] .navlink::after {
            background-color: var(--text-dark);
        }
        
        body[data-theme='dark'] .seg{
            border-color: var(--accent-dark);
            background: rgba(255,255,255,0.05);
        }
        
        body[data-theme='dark'] .seg button{
            color: var(--text-dark);
        }
        
        body[data-theme='dark'] .seg button.active{
            background: rgba(255,255,255,0.15);
            color: #ffffff;
        }
        
        body[data-theme='dark'] .hamburger span {
            background-color: var(--text-dark);
        }
        
        body[data-theme='dark'] section {
            border-top: 1px solid rgba(255,255,255,0.08);
        }
        
        body[data-theme='dark'] .card,
        body[data-theme='dark'] .project-card {
            background: var(--card-bg-dark);
            border: 1px solid var(--card-border-dark);
            box-shadow: var(--card-shadow-dark);
        }
        
        body[data-theme='dark'] .card::before,
        body[data-theme='dark'] .project-card::before {
            background: linear-gradient(90deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.1) 50%, 
                rgba(255,255,255,0) 100%);
        }
        
        body[data-theme='dark'] .card:hover,
        body[data-theme='dark'] .project-card:hover {
            box-shadow: 0 16px 40px rgba(0,0,0,0.5);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        body[data-theme='dark'] .code-title small {
            color: var(--muted-dark);
        }

        @media (max-width: 768px) {
            header {
                padding: 12px 16px;
            }
            
            .hamburger {
                display: flex;
            }
            
            nav {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: rgba(255,255,255,0.98);
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
                flex-direction: column;
                padding: 20px;
                gap: 16px;
                transform: translateY(-100%);
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
                border-bottom: 1px solid rgba(0,0,0,0.1);
                z-index: 50;
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            }
            
            nav.active {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }
            
            .navlink {
                padding: 12px 0;
                font-size: 16px;
                width: 100%;
                text-align: center;
                border-bottom: 1px solid rgba(0,0,0,0.05);
            }
            
            .navlink:last-child {
                border-bottom: none;
            }
            
            .mode-toggle {
                justify-content: center;
                width: 100%;
                margin-top: 10px;
                padding-top: 15px;
                border-top: 1px solid rgba(0,0,0,0.1);
            }
            
            .hero-inner {
                gap: 24px;
            }
            
            .code-title {
                font-size: 32px;
            }
            
            section {
                padding: 50px 0;
            }
            
            .wrap {
                padding: 36px 16px;
            }
            
            .card, .project-card {
                padding: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .code-title {
                font-size: 28px;
            }
            
            .hero {
                min-height: 50vh;
            }
        }
        
        body[data-theme='dark'] nav {
            background: rgba(0,0,0,0.98);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        body[data-theme='dark'] .navlink {
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        body[data-theme='dark'] .navlink:last-child {
            border-bottom: none;
        }
        
        body[data-theme='dark'] .mode-toggle {
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .panels{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:-1}
        .panel{
            position:absolute;
            border-radius:8px;
            opacity:.95;
            box-shadow:0 18px 40px rgba(2,6,23,0.06);
            border:1px solid rgba(255,255,255,0.2);
            transform: translate3d(0, 0, 0);
            will-change: transform;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            overflow: hidden;
        }
        
        .panel.color-red {
            background: rgba(255, 100, 100, 0.18);
            border-color: rgba(255, 100, 100, 0.5);
            box-shadow: 0 18px 40px rgba(255, 100, 100, 0.25);
        }
        
        .panel.color-orange {
            background: rgba(255, 165, 80, 0.18);
            border-color: rgba(255, 165, 80, 0.5);
            box-shadow: 0 18px 40px rgba(255, 165, 80, 0.25);
        }
        
        .panel.color-yellow {
            background: rgba(255, 220, 100, 0.18);
            border-color: rgba(255, 220, 100, 0.5);
            box-shadow: 0 18px 40px rgba(255, 220, 100, 0.25);
        }
        
        .panel.color-green {
            background: rgba(100, 220, 150, 0.18);
            border-color: rgba(100, 220, 150, 0.5);
            box-shadow: 0 18px 40px rgba(100, 220, 150, 0.25);
        }
        
        .panel.color-blue {
            background: rgba(100, 180, 255, 0.18);
            border-color: rgba(100, 180, 255, 0.5);
            box-shadow: 0 18px 40px rgba(100, 180, 255, 0.25);
        }
        
        .panel.color-violet {
            background: rgba(180, 120, 255, 0.18);
            border-color: rgba(180, 120, 255, 0.5);
            box-shadow: 0 18px 40px rgba(180, 120, 255, 0.25);
        }
        
        .panel.large {
            width: 280px;
            height: 140px;
            z-index: 3;
        }
        @media (min-width: 768px) {
            .panel.large {
                width: 320px;
                height: 160px;
            }
        }
        
        .panel.medium {
            width: 220px;
            height: 110px;
            z-index: 2;
            opacity: 0.85;
        }
        @media (min-width: 768px) {
            .panel.medium {
                width: 250px;
                height: 125px;
            }
        }
        
        .panel.small {
            width: 150px;
            height: 75px;
            opacity: 0.7;
            z-index: 1;
        }
        @media (min-width: 768px) {
            .panel.small {
                width: 180px;
                height: 90px;
            }
        }
        
        .panel .inner{
            padding: 10px;
            color: var(--muted-light);
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        @media (min-width: 768px) {
            .panel .inner {
                padding: 12px;
            }
        }
        
        .panel.large .inner {
            font-size: 11px;
            line-height: 1.3;
        }
        @media (min-width: 768px) {
            .panel.large .inner {
                font-size: 12px;
            }
        }
        
        .panel.medium .inner {
            font-size: 10px;
            line-height: 1.3;
        }
        @media (min-width: 768px) {
            .panel.medium .inner {
                font-size: 11px;
            }
        }
        
        .panel.small .inner {
            font-size: 9px;
            line-height: 1.2;
        }
        @media (min-width: 768px) {
            .panel.small .inner {
                font-size: 10px;
            }
        }
        
        .code-line {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }
        
        .typing-cursor {
            display: inline-block;
            width: 6px;
            height: 1em;
            background-color: currentColor;
            margin-left: 1px;
            animation: blink 1s infinite;
            vertical-align: middle;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        body[data-theme='dark'] .panel{
            color:var(--text-dark);
            box-shadow:0 18px 40px rgba(0,0,0,0.4);
        }
        
        body[data-theme='dark'] .panel.color-red {
            background: rgba(255, 100, 100, 0.12);
            border-color: rgba(255, 100, 100, 0.4);
            box-shadow: 0 18px 40px rgba(255, 100, 100, 0.25);
        }
        
        body[data-theme='dark'] .panel.color-orange {
            background: rgba(255, 165, 80, 0.12);
            border-color: rgba(255, 165, 80, 0.4);
            box-shadow: 0 18px 40px rgba(255, 165, 80, 0.25);
        }
        
        body[data-theme='dark'] .panel.color-yellow {
            background: rgba(255, 220, 100, 0.12);
            border-color: rgba(255, 220, 100, 0.4);
            box-shadow: 0 18px 40px rgba(255, 220, 100, 0.25);
        }
        
        body[data-theme='dark'] .panel.color-green {
            background: rgba(100, 220, 150, 0.12);
            border-color: rgba(100, 220, 150, 0.4);
            box-shadow: 0 18px 40px rgba(100, 220, 150, 0.25);
        }
        
        body[data-theme='dark'] .panel.color-blue {
            background: rgba(100, 180, 255, 0.12);
            border-color: rgba(100, 180, 255, 0.4);
            box-shadow: 0 18px 40px rgba(100, 180, 255, 0.25);
        }
        
        body[data-theme='dark'] .panel.color-violet {
            background: rgba(180, 120, 255, 0.12);
            border-color: rgba(180, 120, 255, 0.4);
            box-shadow: 0 18px 40px rgba(180, 120, 255, 0.25);
        }
        
        body[data-theme='dark'] .panel .inner{
            color:var(--muted-dark);
        }
        
        @media (max-width: 768px) {
            .panel.large:nth-child(n+3) {
                display: none;
            }
            .panel.medium:nth-child(n+4) {
                display: none;
            }
            .panel.small:nth-child(n+4) {
                display: none;
            }
        }
        
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .panel {
                transform: none !important;
            }
            
            .typing-cursor {
                animation: none;
                opacity: 1;
            }
        }

        #matrix-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.4s ease;
            background: rgba(0, 0, 0, 0.9);
        }
        
        #matrix-overlay.active {
            opacity: 1;
        }
        
        #matrix-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10001;
        }
        
        .tear-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10002;
            pointer-events: none;
            overflow: hidden;
            display: none;
        }
        
        .tear-container.active {
            display: block;
        }
        
        .tear {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 100%;
            background: inherit;
            transition: top 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            clip-path: polygon(
                0% 0%,
                100% 0%,
                100% 85%,
                95% 87%,
                90% 85%,
                85% 90%,
                80% 85%,
                75% 88%,
                70% 85%,
                65% 89%,
                60% 85%,
                55% 87%,
                50% 85%,
                45% 88%,
                40% 85%,
                35% 86%,
                30% 85%,
                25% 87%,
                20% 85%,
                15% 89%,
                10% 85%,
                5% 86%,
                0% 85%
            );
        }
        
        .tear.active {
            top: 70%;
        }
        
        .tear-edge {
            position: absolute;
            bottom: 15%;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 100, 0.8) 50%, 
                transparent 100%);
            z-index: 10003;
            box-shadow: 0 0 20px rgba(0, 255, 100, 0.5);
        }

        footer {
            min-height: 200px;
            position: relative;
            z-index: 1;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .project-card {
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
        }

        .project-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .project-card:nth-child(2) {
            animation-delay: 0.3s;
        }

        .project-card:nth-child(3) {
            animation-delay: 0.5s;
        }

        .project-card:nth-child(4) {
            animation-delay: 0.7s;
        }

        .project-card:nth-child(5) {
            animation-delay: 0.9s;
        }

        .project-card:nth-child(6) {
            animation-delay: 1.1s;
        }

        .project-card:nth-child(7) {
            animation-delay: 1.3s;
        }

        .project-card:nth-child(8) {
            animation-delay: 1.5s;
        }

        .section-intro {
            margin-bottom: 50px;
            text-align: center;
        }

        .section-intro h2 {
            font-size: 28px;
            margin-bottom: 15px;
        }

        .section-intro p {
            max-width: 700px;
            margin: 0 auto;
        }

        .tech-info {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .tech-item {
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tech-item h4 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .tech-item ul {
            list-style-type: none;
            padding-left: 0;
            margin: 0;
        }

        .tech-item li {
            margin-bottom: 8px;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <header id="topbar">
        <div class="brand">
            <div class="mini" id="brandMini">&lt;/&gt;</div>
        </div>
        <button class="hamburger" id="hamburger" aria-label="Menú principal">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <nav id="nav">
            <a class="navlink" href="#inicio" data-i18n="nav_home">Home</a>
            <a class="navlink" href="#proyectos" data-i18n="nav_projects">Projects</a>
            <a class="navlink" href="#tecnologias" data-i18n="nav_technologies">Technologies</a>
            <a class="navlink" href="#contacto" data-i18n="nav_contact">Contact</a>
            <div class="mode-toggle">
                <div class="seg">
                    <button data-mode="auto" class="active" data-i18n="mode_auto">Auto</button>
                    <button data-mode="light" data-i18n="mode_light">Light</button>
                    <button data-mode="dark" data-i18n="mode_dark">Dark</button>
                </div>
            </div>
            <div class="mode-toggle">
                <div class="seg">
                    <button data-lang="en" class="active">EN</button>
                    <button data-lang="es">ES</button>
                </div>
            </div>
        </nav>
    </header>

    <div class="panels" id="panels"></div>

    <main class="wrap">
        <section id="inicio" class="hero">
            <div class="hero-inner">
                <div class="hero-left">
                    <div class="code-title"><span id="typedWrap">&lt;<span id="typed"></span>&gt;</span>
                        <small class="muted" data-i18n="hero_subtitle">Gallery of innovative and functional web projects.</small></div>
                    <p style="margin-top:18px" data-i18n="hero_desc1">
                        A collection of web projects developed with the latest technologies and responsive design. 
                        From digital menus to interactive catalogs, each project has its own unique style and purpose.
                    </p>
                    <p style="margin-top:18px" data-i18n="hero_desc2">
                        Explore our latest work and discover how we combine creativity, technology, 
                        and functionality to create exceptional digital experiences.
                    </p>
                </div>
            </div>
        </section>

        <section id="proyectos">
            <div class="section-intro">
                <h2 data-i18n="projects_title">Our Projects</h2>
                <p class="lead" data-i18n="projects_lead">A selection of web projects developed with the latest technologies and responsive design.</p>
            </div>
            
            <div class="project-grid">
                <div class="project-card">
                    <div class="project-image">
                        <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1081&q=80" alt="Restaurante Balú">
                    </div>
                    <div class="project-content">
                        <h3 data-i18n="proj1_title">Balú Digital Menu</h3>
                        <p data-i18n="proj1_desc">An interactive digital menu for Balú Charallave Restaurant with modern design, smooth navigation, and integrated virtual assistant. Perfect for showcasing dishes and facilitating orders.</p>
                        <div class="project-tags">
                            <span class="project-tag tag-restaurant" data-i18n="tag_restaurant">Restaurant</span>
                            <span class="project-tag tag-technology" data-i18n="tag_digital">Digital</span>
                            <span class="project-tag tag-restaurant" data-i18n="tag_interactive">Interactive</span>
                        </div>
                        <a href="menu.html" class="project-link">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="view_project">View Project</span>
                        </a>
                    </div>
                </div>
                
                <div class="project-card">
                    <div class="project-image">
                        <img src="https://images.unsplash.com/photo-1558494949-ef010cbdcc31?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1074&q=80" alt="Interking">
                    </div>
                    <div class="project-content">
                        <h3 data-i18n="proj2_title">Interking - Internet Provider</h3>
                        <p data-i18n="proj2_desc">Web platform for Interking, an internet service provider with professional design, plan information, and virtual assistant "Rey" for customer service.</p>
                        <div class="project-tags">
                            <span class="project-tag tag-technology" data-i18n="tag_technology">Technology</span>
                            <span class="project-tag tag-technology" data-i18n="tag_services">Services</span>
                            <span class="project-tag tag-technology" data-i18n="tag_ai_assistant">AI Assistant</span>
                        </div>
                        <a href="ik.html" class="project-link">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="view_project">View Project</span>
                        </a>
                    </div>
                </div>
                
                <div class="project-card">
                    <div class="project-image">
                        <img src="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="StarVenezuela">
                    </div>
                    <div class="project-content">
                        <h3 data-i18n="proj3_title">StarVenezuela - Digital Catalog</h3>
                        <p data-i18n="proj3_desc">Complete digital catalog for StarVenezuela with real-time inventory system, advanced filters, shopping cart, and virtual assistant "Carlitos".</p>
                        <div class="project-tags">
                            <span class="project-tag tag-ecommerce" data-i18n="tag_ecommerce">E-commerce</span>
                            <span class="project-tag tag-ecommerce" data-i18n="tag_catalog">Catalog</span>
                            <span class="project-tag tag-technology" data-i18n="tag_inventory">Inventory</span>
                        </div>
                        <a href="sv.html" class="project-link">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="view_project">View Project</span>
                        </a>
                    </div>
                </div>
                
                <div class="project-card">
                    <div class="project-image">
                        <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Casares Restaurante">
                    </div>
                    <div class="project-content">
                        <h3 data-i18n="proj4_title">Casares - Gourmet Restaurant</h3>
                        <p data-i18n="proj4_desc">Website for Casares gourmet restaurant with elegant design, interactive tasting menu, and online reservation system. Includes gallery of dishes and culinary experiences.</p>
                        <div class="project-tags">
                            <span class="project-tag tag-restaurant" data-i18n="tag_restaurant">Restaurant</span>
                            <span class="project-tag tag-restaurant" data-i18n="tag_gourmet">Gourmet</span>
                            <span class="project-tag tag-technology" data-i18n="tag_reservations">Reservations</span>
                        </div>
                        <a href="casares.html" class="project-link">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="view_project">View Project</span>
                        </a>
                    </div>
                </div>
                
                <div class="project-card">
                    <div class="project-image">
                        <img src="https://images.unsplash.com/photo-1565299507177-b0ac66763828?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1222&q=80" alt="Empizzados">
                    </div>
                    <div class="project-content">
                        <h3 data-i18n="proj5_title">Empizzados - Pizzeria & Brewery</h3>
                        <p data-i18n="proj5_desc">Website for Empizzados pizzeria and brewery with artisanal pizza catalog, beers, and online ordering system. Modern and dynamic design.</p>
                        <div class="project-tags">
                            <span class="project-tag tag-restaurant" data-i18n="tag_pizzeria">Pizzeria</span>
                            <span class="project-tag tag-ecommerce" data-i18n="tag_online_orders">Online Orders</span>
                            <span class="project-tag tag-restaurant" data-i18n="tag_brewery">Brewery</span>
                        </div>
                        <a href="empizzados.html" class="project-link">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="view_project">View Project</span>
                        </a>
                    </div>
                </div>
                
                <div class="project-card">
                    <div class="project-image">
                        <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2673&q=80" alt="Rancho e Lola Beach">
                    </div>
                    <div class="project-content">
                        <h3 data-i18n="proj6_title">Rancho e Lola Beach - Margarita Island</h3>
                        <p data-i18n="proj6_desc">Website for a resort on Margarita Island with vibrant design, interactive gallery, and virtual assistant "Lola". Includes parallax effects, online booking, and integrated chat.</p>
                        <div class="project-tags">
                            <span class="project-tag tag-restaurant" data-i18n="tag_resort">Resort</span>
                            <span class="project-tag tag-technology" data-i18n="tag_tourism">Tourism</span>
                            <span class="project-tag tag-technology" data-i18n="tag_ai_assistant">AI Assistant</span>
                        </div>
                        <a href="lola.html" class="project-link">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="view_project">View Project</span>
                        </a>
                    </div>
                </div>

                <!-- Proyecto: Arcade Games -->
                <div class="project-card">
                    <div class="project-image">
                        <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Arcade Games">
                    </div>
                    <div class="project-content">
                        <h3 data-i18n="proj7_title">Arcade Games - Digital Game Store</h3>
                        <p data-i18n="proj7_desc">E-commerce platform for digital PlayStation and Xbox games. Real-time inventory, shopping cart, instant delivery, and competitive prices on a wide selection of titles.</p>
                        <div class="project-tags">
                            <span class="project-tag tag-ecommerce" data-i18n="tag_ecommerce">E-commerce</span>
                            <span class="project-tag tag-technology" data-i18n="tag_digital_store">Digital Store</span>
                            <span class="project-tag tag-ecommerce" data-i18n="tag_instant_delivery">Instant Delivery</span>
                        </div>
                        <a href="ag.html" class="project-link">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="view_project">View Project</span>
                        </a>
                    </div>
                </div>

                <!-- Nuevo proyecto: CS Brazilian Steakhouse -->
                <div class="project-card">
                    <div class="project-image">
                        <img src="https://images.unsplash.com/photo-1558030006-450675393462?q=80&w=1170&auto=format&fit=crop" alt="CS Brazilian Steakhouse">
                    </div>
                    <div class="project-content">
                        <h3 data-i18n="proj8_title">CS Brazilian Steakhouse - Authentic Churrasco Menu</h3>
                        <p data-i18n="proj8_desc">Digital menu for a Brazilian steakhouse in Newark, DE. Features churrasco meats, caipirinhas, feijoada, and an extensive selection of Brazilian cocktails and spirits. Fully responsive with dynamic clip-path hero effect.</p>
                        <div class="project-tags">
                            <span class="project-tag tag-restaurant" data-i18n="tag_restaurant">Restaurant</span>
                            <span class="project-tag tag-restaurant" data-i18n="tag_brazilian">Brazilian</span>
                            <span class="project-tag tag-technology" data-i18n="tag_digital_menu">Digital Menu</span>
                        </div>
                        <a href="brazilian.html" class="project-link">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="view_project">View Project</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="tecnologias">
            <div class="section-intro">
                <h2 data-i18n="tech_title">Technologies Used</h2>
                <p class="lead" data-i18n="tech_lead">These projects implement the following technologies and features:</p>
            </div>
            
            <div class="card">
                <div class="tech-info">
                    <div class="tech-item">
                        <h4><i class="fas fa-code" style="color: #64b4ff; margin-right: 10px;"></i> <span data-i18n="tech_frontend">Frontend</span></h4>
                        <ul>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> HTML5, CSS3, JavaScript</li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="tech_responsive">Responsive Design</span></li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="tech_parallax">Parallax Effects</span></li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="tech_animations">CSS Animations</span></li>
                        </ul>
                    </div>
                    <div class="tech-item">
                        <h4><i class="fas fa-robot" style="color: #ffa550; margin-right: 10px;"></i> <span data-i18n="tech_ai_assistants">AI Assistants</span></h4>
                        <ul>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="ai_balu">Balú - Restaurant Assistant</span></li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="ai_rey">Rey - Interking Assistant</span></li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="ai_carlitos">Carlitos - Catalog Assistant</span></li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="ai_lola">Lola - Resort Assistant</span></li>
                        </ul>
                    </div>
                    <div class="tech-item">
                        <h4><i class="fas fa-mobile-alt" style="color: #64dc96; margin-right: 10px;"></i> <span data-i18n="tech_experience">Experience</span></h4>
                        <ul>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="exp_mobile">Mobile Optimized</span></li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="exp_nav">Intuitive Navigation</span></li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="exp_ui">Modern Interfaces</span></li>
                            <li><i class="fas fa-check" style="color: #00cc66; margin-right: 8px;"></i> <span data-i18n="exp_perf">Optimized Performance</span></li>
                        </ul>
                    </div>
                </div>
                <p style="margin-top: 1.5rem;" data-i18n="tech_footer">Each project is optimized for an exceptional user experience on mobile and desktop devices, implementing best modern web development practices.</p>
            </div>
        </section>

        <section id="contacto">
            <div class="section-intro">
                <h2 data-i18n="more_projects_title">More Projects</h2>
                <p class="lead" data-i18n="more_projects_lead">Interested in seeing more of our work or developing a similar project?</p>
            </div>
            
            <div class="card">
                <h3 data-i18n="contact_card_title">Contact</h3>
                <p data-i18n="contact_card_text">
                    If you have a project in mind or want to know more about our services, feel free to contact us. 
                    We specialize in custom web development, interactive applications, and innovative digital solutions.
                </p>
                <div class="back-button-wrapper">
                    <a href="index.html" class="back-button">
                        <i class="fas fa-arrow-left"></i> <span data-i18n="back_home">Back to Home</span>
                    </a>
                </div>
            </div>
        </section>

        <footer>
            <p data-i18n="footer_copy">© 2023 ProtonLab – Project Gallery</p>
            <p style="margin-top: 10px; font-size: 11px; opacity: 0.7;">
                <span data-i18n="footer_slogan">Innovation in every line of code, creativity in every project.</span> <a href="index.html" class="footer-pi">←</a>
            </p>
        </footer>
    </main>

    <div id="matrix-overlay">
        <canvas id="matrix-canvas"></canvas>
    </div>
    
    <div class="tear-container">
        <div class="tear"></div>
        <div class="tear-edge"></div>
    </div>

    <script>
        // ========================================
        // [NUEVO] PERSISTENCIA CON LOCALSTORAGE
        // ========================================
        const STORAGE_KEYS = {
            THEME: 'protonlab_theme',
            LANG: 'protonlab_lang'
        };

        function setPreference(key, value) {
            try {
                localStorage.setItem(key, value);
            } catch (e) {
                console.warn('No se pudo guardar en localStorage', e);
            }
        }

        function getPreference(key, defaultValue = null) {
            try {
                return localStorage.getItem(key) || defaultValue;
            } catch (e) {
                console.warn('No se pudo leer localStorage', e);
                return defaultValue;
            }
        }

        // ========================================
        // INICIALIZACIÓN PRINCIPAL
        // ========================================
        
        // === Variables globales ===
        let isTearing = false;
        let tearForce = 0;
        const MAX_TEAR_FORCE = 100;
        
        // === Elementos Matrix ===
        const matrixOverlay = document.getElementById('matrix-overlay');
        const matrixCanvas = document.getElementById('matrix-canvas');
        const tearContainer = document.querySelector('.tear-container');
        const tear = document.querySelector('.tear');
        
        // === Modo de color ===
        const modeButtons = document.querySelectorAll('[data-mode]');
        
        function applyTheme(mode) {
            if (mode === 'auto') {
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                document.body.dataset.theme = prefersDark ? 'dark' : 'light';
            } else {
                document.body.dataset.theme = mode;
            }
            
            setTimeout(applyRandomColors, 50);
        }

        // [MODIFICADO] Cargar tema guardado al inicio
        const savedTheme = getPreference(STORAGE_KEYS.THEME, 'auto');
        // Activar visualmente el botón correspondiente
        modeButtons.forEach(btn => {
            btn.classList.toggle('active', btn.dataset.mode === savedTheme);
        });
        applyTheme(savedTheme);

        // [MODIFICADO] Event listeners para botones de tema (ahora guardan en localStorage)
        modeButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                modeButtons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                const selectedMode = this.dataset.mode;
                setPreference(STORAGE_KEYS.THEME, selectedMode);
                applyTheme(selectedMode);
            });
        });

        // [MODIFICADO] Si el usuario tiene guardado 'auto', reaccionamos a cambios del sistema
        if (savedTheme === 'auto') {
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
                if (getPreference(STORAGE_KEYS.THEME) === 'auto') {
                    applyTheme('auto');
                }
            });
        }

        // === TRADUCCIONES ===
        const translations = {
            nav_home: { en: "Home", es: "Inicio" },
            nav_projects: { en: "Projects", es: "Proyectos" },
            nav_technologies: { en: "Technologies", es: "Tecnologías" },
            nav_contact: { en: "Contact", es: "Contacto" },
            mode_auto: { en: "Auto", es: "Auto" },
            mode_light: { en: "Light", es: "Claro" },
            mode_dark: { en: "Dark", es: "Oscuro" },
            hero_subtitle: { en: "Gallery of innovative and functional web projects.", es: "Galería de proyectos web innovadores y funcionales." },
            hero_desc1: { en: "A collection of web projects developed with the latest technologies and responsive design. From digital menus to interactive catalogs, each project has its own unique style and purpose.", es: "Una colección de proyectos web desarrollados con las últimas tecnologías y diseño responsivo. Desde menús digitales hasta catálogos interactivos, cada proyecto tiene su propio estilo y propósito único." },
            hero_desc2: { en: "Explore our latest work and discover how we combine creativity, technology, and functionality to create exceptional digital experiences.", es: "Explora nuestros trabajos más recientes y descubre cómo combinamos creatividad, tecnología y funcionalidad para crear experiencias digitales excepcionales." },
            projects_title: { en: "Our Projects", es: "Nuestros Proyectos" },
            projects_lead: { en: "A selection of web projects developed with the latest technologies and responsive design.", es: "Una selección de proyectos web desarrollados con las últimas tecnologías y diseño responsivo." },
            view_project: { en: "View Project", es: "Ver Proyecto" },
            
            proj1_title: { en: "Balú Digital Menu", es: "Menú Digital Balú" },
            proj1_desc: { en: "An interactive digital menu for Balú Charallave Restaurant with modern design, smooth navigation, and integrated virtual assistant. Perfect for showcasing dishes and facilitating orders.", es: "Un menú digital interactivo para el Restaurante Balú Charallave con diseño moderno, navegación suave y asistente virtual integrado. Perfecto para mostrar platillos y facilitar pedidos." },
            tag_restaurant: { en: "Restaurant", es: "Restaurante" },
            tag_digital: { en: "Digital", es: "Digital" },
            tag_interactive: { en: "Interactive", es: "Interactivo" },
            
            proj2_title: { en: "Interking - Internet Provider", es: "Interking - Proveedor de Internet" },
            proj2_desc: { en: "Web platform for Interking, an internet service provider with professional design, plan information, and virtual assistant \"Rey\" for customer service.", es: "Plataforma web para Interking, proveedor de servicios de internet con diseño profesional, información de planes y asistente virtual \"Rey\" para atención al cliente." },
            tag_technology: { en: "Technology", es: "Tecnología" },
            tag_services: { en: "Services", es: "Servicios" },
            tag_ai_assistant: { en: "AI Assistant", es: "Asistente IA" },
            
            proj3_title: { en: "StarVenezuela - Digital Catalog", es: "StarVenezuela - Catálogo Digital" },
            proj3_desc: { en: "Complete digital catalog for StarVenezuela with real-time inventory system, advanced filters, shopping cart, and virtual assistant \"Carlitos\".", es: "Catálogo digital completo para StarVenezuela con sistema de inventario en tiempo real, filtros avanzados, carrito de compras y asistente virtual \"Carlitos\"." },
            tag_ecommerce: { en: "E-commerce", es: "E-commerce" },
            tag_catalog: { en: "Catalog", es: "Catálogo" },
            tag_inventory: { en: "Inventory", es: "Inventario" },
            
            proj4_title: { en: "Casares - Gourmet Restaurant", es: "Casares - Restaurante Gourmet" },
            proj4_desc: { en: "Website for Casares gourmet restaurant with elegant design, interactive tasting menu, and online reservation system. Includes gallery of dishes and culinary experiences.", es: "Web para el restaurante gourmet Casares con diseño elegante, menú degustación interactivo y sistema de reservas en línea. Incluye galería de platos y experiencias culinarias." },
            tag_gourmet: { en: "Gourmet", es: "Gourmet" },
            tag_reservations: { en: "Reservations", es: "Reservas" },
            
            proj5_title: { en: "Empizzados - Pizzeria & Brewery", es: "Empizzados - Pizzería & Cervecería" },
            proj5_desc: { en: "Website for Empizzados pizzeria and brewery with artisanal pizza catalog, beers, and online ordering system. Modern and dynamic design.", es: "Sitio web para la pizzería y cervecería Empizzados con catálogo de pizzas artesanales, cervezas y sistema de pedidos online. Diseño moderno y dinámico." },
            tag_pizzeria: { en: "Pizzeria", es: "Pizzería" },
            tag_online_orders: { en: "Online Orders", es: "Pedidos Online" },
            tag_brewery: { en: "Brewery", es: "Cervecería" },
            
            proj6_title: { en: "Rancho e Lola Beach - Margarita Island", es: "Rancho e Lola Beach - Isla de Margarita" },
            proj6_desc: { en: "Website for a resort on Margarita Island with vibrant design, interactive gallery, and virtual assistant \"Lola\". Includes parallax effects, online booking, and integrated chat.", es: "Página web para un resort en la Isla de Margarita con diseño vibrante, galería interactiva y asistente virtual \"Lola\". Incluye efectos parallax, reservas en línea y chat integrado." },
            tag_resort: { en: "Resort", es: "Resort" },
            tag_tourism: { en: "Tourism", es: "Turismo" },
            
            proj7_title: {
                en: "Arcade Games - Digital Game Store",
                es: "Arcade Games - Tienda de Juegos Digitales"
            },
            proj7_desc: {
                en: "E-commerce platform for digital PlayStation and Xbox games. Real-time inventory, shopping cart, instant delivery, and competitive prices on a wide selection of titles.",
                es: "Plataforma de e-commerce para juegos digitales de PlayStation y Xbox. Inventario en tiempo real, carrito de compras, entrega instantánea y precios competitivos en una amplia selección de títulos."
            },
            tag_digital_store: {
                en: "Digital Store",
                es: "Tienda Digital"
            },
            tag_instant_delivery: {
                en: "Instant Delivery",
                es: "Entrega Instantánea"
            },

            // Nuevo proyecto: CS Brazilian Steakhouse
            proj8_title: {
                en: "CS Brazilian Steakhouse - Authentic Churrasco Menu",
                es: "CS Brazilian Steakhouse - Menú de Churrasco Auténtico"
            },
            proj8_desc: {
                en: "Digital menu for a Brazilian steakhouse in Newark, DE. Features churrasco meats, caipirinhas, feijoada, and an extensive selection of Brazilian cocktails and spirits. Fully responsive with dynamic clip-path hero effect.",
                es: "Menú digital para un restaurante brasileño en Newark, DE. Ofrece carnes de churrasco, caipirinhas, feijoada y una amplia selección de cócteles y destilados brasileños. Totalmente responsivo con efecto hero de clip-path dinámico."
            },
            tag_brazilian: {
                en: "Brazilian",
                es: "Brasileño"
            },
            tag_digital_menu: {
                en: "Digital Menu",
                es: "Menú Digital"
            },

            tech_title: { en: "Technologies Used", es: "Tecnologías Utilizadas" },
            tech_lead: { en: "These projects implement the following technologies and features:", es: "Estos proyectos implementan las siguientes tecnologías y características:" },
            tech_frontend: { en: "Frontend", es: "Frontend" },
            tech_responsive: { en: "Responsive Design", es: "Diseño Responsivo" },
            tech_parallax: { en: "Parallax Effects", es: "Efectos Parallax" },
            tech_animations: { en: "CSS Animations", es: "Animaciones CSS" },
            tech_ai_assistants: { en: "AI Assistants", es: "Asistentes IA" },
            ai_balu: { en: "Balú - Restaurant Assistant", es: "Balú - Asistente de Restaurante" },
            ai_rey: { en: "Rey - Interking Assistant", es: "Rey - Asistente de Interking" },
            ai_carlitos: { en: "Carlitos - Catalog Assistant", es: "Carlitos - Asistente de Catálogo" },
            ai_lola: { en: "Lola - Resort Assistant", es: "Lola - Asistente de Resort" },
            tech_experience: { en: "Experience", es: "Experiencia" },
            exp_mobile: { en: "Mobile Optimized", es: "Optimizado para móviles" },
            exp_nav: { en: "Intuitive Navigation", es: "Navegación intuitiva" },
            exp_ui: { en: "Modern Interfaces", es: "Interfaces modernas" },
            exp_perf: { en: "Optimized Performance", es: "Performance optimizada" },
            tech_footer: { en: "Each project is optimized for an exceptional user experience on mobile and desktop devices, implementing best modern web development practices.", es: "Cada proyecto está optimizado para una experiencia de usuario excepcional en dispositivos móviles y desktop, implementando las mejores prácticas de desarrollo web moderno." },
            
            more_projects_title: { en: "More Projects", es: "Más Proyectos" },
            more_projects_lead: { en: "Interested in seeing more of our work or developing a similar project?", es: "¿Interesado en ver más de nuestro trabajo o desarrollar un proyecto similar?" },
            contact_card_title: { en: "Contact", es: "Contacto" },
            contact_card_text: { en: "If you have a project in mind or want to know more about our services, feel free to contact us. We specialize in custom web development, interactive applications, and innovative digital solutions.", es: "Si tienes un proyecto en mente o quieres saber más sobre nuestros servicios, no dudes en contactarnos. Estamos especializados en desarrollo web a medida, aplicaciones interactivas y soluciones digitales innovadoras." },
            back_home: { en: "Back to Home", es: "Volver a Inicio" },
            
            footer_copy: { en: "© 2023 ProtonLab – Project Gallery", es: "© 2023 ProtonLab – Galería de Proyectos" },
            footer_slogan: { en: "Innovation in every line of code, creativity in every project.", es: "Innovación en cada línea de código, creatividad en cada proyecto." }
        };

        const langButtons = document.querySelectorAll('[data-lang]');
        
        // [MODIFICADO] Función setLanguage ahora actualiza los textos y recibe el idioma
        function setLanguage(lang) {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[key] && translations[key][lang]) {
                    el.innerText = translations[key][lang];
                }
            });
            
            // Actualizar botones activos
            langButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            
            // Actualizar atributo lang del html
            document.documentElement.lang = lang;
        }

        // [MODIFICADO] Cargar idioma guardado al inicio
        const savedLang = getPreference(STORAGE_KEYS.LANG, 'en');
        setLanguage(savedLang);

        // [MODIFICADO] Event listeners para botones de idioma (ahora guardan en localStorage)
        langButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                const selectedLang = this.dataset.lang;
                setPreference(STORAGE_KEYS.LANG, selectedLang);
                setLanguage(selectedLang);
            });
        });
        
        // === CONFIGURACIÓN DE COLORES MEJORADA ===
        const colorPalettes = [
            { r: '255, 100, 100', hex: '#ff6464' },
            { r: '255, 165, 80',  hex: '#ffa550' },
            { r: '255, 220, 100', hex: '#ffdc64' },
            { r: '100, 220, 150', hex: '#64dc96' },
            { r: '100, 180, 255', hex: '#64b4ff' },
            { r: '180, 120, 255', hex: '#b478ff' }
        ];
        
        function applyRandomColors() {
            const theme = colorPalettes[Math.floor(Math.random() * colorPalettes.length)];
            
            const accentColor = `rgb(${theme.r})`;
            const glowColor = `rgba(${theme.r}, 0.4)`;
            const bgColor = `rgba(${theme.r}, 0.1)`;
            
            const projectLinks = document.querySelectorAll('.project-link');
            projectLinks.forEach(link => {
                link.style.background = `rgba(${theme.r}, 0.15)`;
                link.style.border = `1px solid rgba(${theme.r}, 0.3)`;
                link.onmouseenter = () => {
                    link.style.boxShadow = `0 8px 20px ${glowColor}`;
                    link.style.borderColor = accentColor;
                };
                link.onmouseleave = () => {
                    link.style.boxShadow = 'none';
                    link.style.borderColor = `rgba(${theme.r}, 0.3)`;
                };
            });
            
            const backButton = document.querySelector('.back-button');
            if(backButton) {
                backButton.style.background = `rgba(${theme.r}, 0.15)`;
                backButton.style.border = `1px solid rgba(${theme.r}, 0.3)`;
                backButton.onmouseenter = () => {
                    backButton.style.boxShadow = `0 8px 20px ${glowColor}`;
                    backButton.style.borderColor = accentColor;
                };
                backButton.onmouseleave = () => {
                    backButton.style.boxShadow = 'none';
                    backButton.style.borderColor = `rgba(${theme.r}, 0.3)`;
                };
            }
        }
        
        // Aplicar colores al cargar
        applyRandomColors();
        
        // === ANIMACIÓN TÍTULO ===
        const typed = document.getElementById('typed');
        const brandMini = document.getElementById('brandMini');
        const finalText = 'GalleryDev';
        const randomChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:,.<>?';
        
        const revealOrder = [0, 6, 3, 7, 2, 5, 8, 1, 4, 9];
        
        let currentText = Array(10).fill('');
        let currentStep = 0;
        let animationPhase = 1;
        let animationInterval;
        let animationStartTime;
        const animationSpeed = 100;
        
        function startTitleAnimation() {
            currentText = Array(10).fill('');
            currentStep = 0;
            animationPhase = 1;
            animationStartTime = Date.now();
            
            if (animationInterval) clearInterval(animationInterval);
            
            animationInterval = setInterval(updateAnimation, animationSpeed);
            
            const phase1Steps = 10;
            const phase1TimePerStep = 3000 / phase1Steps;
            
            for (let i = 0; i < phase1Steps; i++) {
                setTimeout(() => {
                    if (currentStep < 10) currentStep++;
                }, i * phase1TimePerStep);
            }
            
            setTimeout(() => { animationPhase = 2; }, 3000);
            setTimeout(() => {
                clearInterval(animationInterval);
                typed.textContent = finalText;
            }, 5000);
        }
        
        function updateAnimation() {
            if (animationPhase === 1) {
                for (let i = 0; i < 10; i++) {
                    if (i < currentStep) {
                        const pos = revealOrder[i];
                        if (pos < 10) {
                            currentText[pos] = randomChars[Math.floor(Math.random() * randomChars.length)];
                        }
                    } else {
                        const pos = revealOrder[i];
                        if (pos < 10) {
                            currentText[pos] = '';
                        }
                    }
                }
            } else if (animationPhase === 2) {
                const progress = (Date.now() - animationStartTime - 3000) / 2000;
                const charsToReveal = Math.min(10, Math.floor(progress * 10));
                
                for (let i = 0; i < 10; i++) {
                    if (i < charsToReveal) {
                        const pos = revealOrder[i];
                        if (pos < finalText.length) {
                            currentText[pos] = finalText[pos];
                        }
                    } else {
                        const pos = revealOrder[i];
                        if (pos < 10) {
                            currentText[pos] = randomChars[Math.floor(Math.random() * randomChars.length)];
                        }
                    }
                }
            }
            
            typed.textContent = currentText.join('');
        }
        
        startTitleAnimation();
        brandMini.addEventListener('click', () => { startTitleAnimation(); });
        
        // === PARALLAX PANELS (OPTIMIZADO PARA MÓVILES) ===
        const panels = document.getElementById('panels');
        
        const rainbowColors = ['color-red', 'color-orange', 'color-yellow', 'color-green', 'color-blue', 'color-violet'];
        const occupiedPositions = [];
        
        function isOverlapping(pos1, pos2, size1, size2, margin = 5) {
            const left1 = parseFloat(pos1.left);
            const top1 = parseFloat(pos1.top);
            const left2 = parseFloat(pos2.left);
            const top2 = parseFloat(pos2.top);
            
            const right1 = left1 + size1.width + margin;
            const bottom1 = top1 + size1.height + margin;
            const right2 = left2 + size2.width + margin;
            const bottom2 = top2 + size2.height + margin;
            
            return !(right1 < left2 || left1 > right2 || bottom1 < top2 || top1 > bottom2);
        }
        
        function getRandomPosition(sizeType) {
            let leftMin, leftMax, topMin, topMax, size;
            
            switch(sizeType) {
                case 'large':
                    leftMin = 2; leftMax = 70; topMin = 15; topMax = 70;
                    size = { width: 20, height: 15 };
                    break;
                case 'medium':
                    leftMin = 5; leftMax = 75; topMin = 10; topMax = 75;
                    size = { width: 16, height: 12 };
                    break;
                case 'small':
                    leftMin = 8; leftMax = 82; topMin = 5; topMax = 80;
                    size = { width: 12, height: 8 };
                    break;
            }
            
            let attempts = 0;
            const maxAttempts = 50;
            
            while (attempts < maxAttempts) {
                const position = {
                    left: (leftMin + Math.random() * (leftMax - leftMin)).toFixed(1) + '%',
                    top: (topMin + Math.random() * (topMax - topMin)).toFixed(1) + '%'
                };
                
                let hasOverlap = false;
                for (const occupied of occupiedPositions) {
                    if (isOverlapping(position, occupied.position, size, occupied.size)) {
                        hasOverlap = true;
                        break;
                    }
                }
                
                if (!hasOverlap) {
                    occupiedPositions.push({ position, size });
                    return position;
                }
                
                attempts++;
            }
            
            const fallbackPosition = {
                left: (leftMin + Math.random() * (leftMax - leftMin)).toFixed(1) + '%',
                top: (topMin + Math.random() * (topMax - topMin)).toFixed(1) + '%'
            };
            occupiedPositions.push({ position: fallbackPosition, size });
            return fallbackPosition;
        }
        
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        const shuffledColors = shuffleArray(rainbowColors);
        
        const largePanelsContent = [
            { speed: 0.9, lines: ['// Galería de Proyectos', 'function initGallery() {', '  loadProjects();', '  animateCards();', '  return "ready";', '}', 'status: online'] },
            { speed: 0.8, lines: ['<gallery/>', 'const projects = [', '  "Menú Digital Balú",', '  "Interking",', '  "StarVenezuela"', '];', 'export { projects };'] }
        ];
        
        const mediumPanelsContent = [
            { speed: 0.5, lines: ['// Tecnologías usadas', 'tech: ["HTML5", "CSS3", "JS"]', 'frameworks: []', 'features: ["responsive", "parallax"]', 'status: "deployed"'] },
            { speed: 0.45, lines: ['func loadImage(url) {', '  let img = new Image()', '  img.src = url', '  return img', '}', 'preload: complete'] },
            { speed: 0.4, lines: ['public class Project {', '  private String name;', '  private String desc;', '  private String[] tags;', '  public void display() {}', '}'] }
        ];
        
        const smallPanelsContent = [
            { speed: 0.25, lines: ['images loaded', 'optimized', 'compressed'] },
            { speed: 0.2, lines: ['CSS: animated', 'transition: smooth', 'effects: parallax'] },
            { speed: 0.18, lines: ['mobile first', 'responsive', 'touch friendly'] }
        ];
        
        const isMobile = window.innerWidth <= 768;
        
        const largePanelsToUse = isMobile ? largePanelsContent.slice(0, 2) : largePanelsContent;
        const mediumPanelsToUse = isMobile ? mediumPanelsContent.slice(0, 3) : mediumPanelsContent;
        const smallPanelsToUse = isMobile ? smallPanelsContent.slice(0, 3) : smallPanelsContent;
        
        const largePanels = largePanelsToUse.map(content => ({ ...content, ...getRandomPosition('large') }));
        const mediumPanels = mediumPanelsToUse.map(content => ({ ...content, ...getRandomPosition('medium') }));
        const smallPanels = smallPanelsToUse.map(content => ({ ...content, ...getRandomPosition('small') }));
        
        function typeText(element, text, speed, onComplete) {
            let i = 0;
            element.innerHTML = '';
            
            function typeChar() {
                if (i < text.length) {
                    const char = text.charAt(i);
                    element.innerHTML += char === ' ' ? '&nbsp;' : char;
                    i++;
                    
                    let delay = speed;
                    if (char === '.' || char === ';' || char === '}') delay = speed * 3;
                    else if (char === ',' || char === ' ') delay = speed * 1.5;
                    
                    setTimeout(typeChar, delay);
                } else if (onComplete) {
                    setTimeout(onComplete, 1000);
                }
            }
            
            typeChar();
        }
        
        function animatePanel(panel, lines, isSmall = false) {
            const inner = panel.querySelector('.inner');
            let currentLine = 0;
            let isAnimating = false;
            let timeoutId = null;
            
            function stopAnimation() {
                isAnimating = false;
                if (timeoutId) {
                    clearTimeout(timeoutId);
                    timeoutId = null;
                }
            }
            
            function typeNextLine() {
                if (!isAnimating) return;
                
                if (currentLine < lines.length) {
                    const lineElement = document.createElement('div');
                    lineElement.className = 'code-line';
                    inner.appendChild(lineElement);
                    
                    const baseSpeed = isSmall ? 25 + Math.random() * 20 : 40 + Math.random() * 30;
                    
                    typeText(lineElement, lines[currentLine], baseSpeed, () => {
                        if (!isAnimating) return;
                        
                        currentLine++;
                        if (currentLine < lines.length) {
                            const pauseTime = isSmall ? 200 : 300;
                            timeoutId = setTimeout(typeNextLine, pauseTime);
                        } else {
                            timeoutId = setTimeout(() => {
                                if (!isAnimating) return;
                                inner.innerHTML = '';
                                currentLine = 0;
                                timeoutId = setTimeout(typeNextLine, isSmall ? 500 : 800);
                            }, isSmall ? 1500 : 2000);
                        }
                    });
                }
            }
            
            return {
                start: () => { if (!isAnimating) { isAnimating = true; typeNextLine(); } },
                stop: () => { stopAnimation(); }
            };
        }
        
        const animationControllers = new Map();
        const panelObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const panelEl = entry.target;
                const controller = animationControllers.get(panelEl);
                
                if (entry.isIntersecting) {
                    if (controller) controller.start();
                } else {
                    if (controller) controller.stop();
                }
            });
        }, { root: null, rootMargin: '100px', threshold: 0 });
        
        largePanels.forEach((c, index) => {
            const el = document.createElement('div');
            el.className = 'panel large ' + shuffledColors[index % shuffledColors.length];
            el.style.left = c.left;
            el.style.top = c.top;
            const inner = document.createElement('div');
            inner.className = 'inner';
            el.appendChild(inner);
            panels.appendChild(el);
            c.el = el;
            const controller = animatePanel(el, c.lines, false);
            animationControllers.set(el, controller);
            panelObserver.observe(el);
        });
        
        const shuffledColorsMedium = shuffleArray(rainbowColors);
        mediumPanels.forEach((c, index) => {
            const el = document.createElement('div');
            el.className = 'panel medium ' + shuffledColorsMedium[index % shuffledColorsMedium.length];
            el.style.left = c.left;
            el.style.top = c.top;
            const inner = document.createElement('div');
            inner.className = 'inner';
            el.appendChild(inner);
            panels.appendChild(el);
            c.el = el;
            const controller = animatePanel(el, c.lines, false);
            animationControllers.set(el, controller);
            panelObserver.observe(el);
        });
        
        const shuffledColorsSmall = shuffleArray(rainbowColors);
        smallPanels.forEach((c, index) => {
            const el = document.createElement('div');
            el.className = 'panel small ' + shuffledColorsSmall[index % shuffledColorsSmall.length];
            el.style.left = c.left;
            el.style.top = c.top;
            const inner = document.createElement('div');
            inner.className = 'inner';
            el.appendChild(inner);
            panels.appendChild(el);
            c.el = el;
            const controller = animatePanel(el, c.lines, true);
            animationControllers.set(el, controller);
            panelObserver.observe(el);
        });

        let ticking = false;
        window.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const scrollY = window.scrollY;
                    largePanels.forEach(c => { c.el.style.transform = `translate3d(0, ${-scrollY * c.speed}px, 0)`; });
                    mediumPanels.forEach(c => { c.el.style.transform = `translate3d(0, ${-scrollY * c.speed}px, 0)`; });
                    smallPanels.forEach(c => { c.el.style.transform = `translate3d(0, ${-scrollY * c.speed}px, 0)`; });
                    ticking = false;
                });
                ticking = true;
            }
            
            handleTearEffect();
        });
        
        // === Ocultar header ===
        const topbar = document.getElementById('topbar'); 
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const y = window.scrollY;
            if(y > lastScroll + 10) topbar.classList.add('hidden');
            else if(y < lastScroll - 10) topbar.classList.remove('hidden');
            lastScroll = y;
        });

        // === Menú hamburguesa ===
        const hamburger = document.getElementById('hamburger');
        const nav = document.getElementById('nav');
        let isMenuOpen = false;
        
        function toggleMenu() {
            isMenuOpen = !isMenuOpen;
            hamburger.classList.toggle('active');
            nav.classList.toggle('active');
            
            if (isMenuOpen) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        hamburger.addEventListener('click', toggleMenu);
        
        document.querySelectorAll('.navlink').forEach(link => {
            link.addEventListener('click', () => {
                if (isMenuOpen) {
                    toggleMenu();
                }
            });
        });
        
        document.addEventListener('click', (e) => {
            if (isMenuOpen && !nav.contains(e.target) && !hamburger.contains(e.target)) {
                toggleMenu();
            }
        });
        
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768 && isMenuOpen) {
                toggleMenu();
            }
        });

        // === EFECTO MATRIX ===
        let matrixCtx = matrixCanvas.getContext('2d');
        let matrixChars = [];
        let matrixAnimationId = null;
        
        const MATRIX_CONFIG = {
            fontSize: 14,
            columns: 0,
            charSet: "01",
            colors: ['#0f0', '#0c0', '#090', '#060', '#0f0']
        };
        
        function initMatrixEffect() {
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
            
            MATRIX_CONFIG.columns = Math.floor(window.innerWidth / MATRIX_CONFIG.fontSize);
            
            matrixChars = [];
            for (let i = 0; i < MATRIX_CONFIG.columns; i++) {
                matrixChars.push({
                    x: i * MATRIX_CONFIG.fontSize,
                    y: Math.random() * -window.innerHeight,
                    speed: 2 + Math.random() * 5,
                    chars: [],
                    charCount: 10 + Math.floor(Math.random() * 20)
                });
            }
            
            if (matrixAnimationId) {
                cancelAnimationFrame(matrixAnimationId);
            }
            drawMatrix();
        }
        
        function drawMatrix() {
            matrixCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            matrixCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
            
            matrixCtx.font = `bold ${MATRIX_CONFIG.fontSize}px 'JetBrains Mono', monospace`;
            
            matrixChars.forEach(column => {
                column.y += column.speed;
                
                if (column.y > window.innerHeight) {
                    column.y = Math.random() * -100;
                    column.chars = [];
                }
                
                if (column.chars.length < column.charCount) {
                    const newChar = {
                        char: MATRIX_CONFIG.charSet[Math.floor(Math.random() * MATRIX_CONFIG.charSet.length)],
                        color: MATRIX_CONFIG.colors[Math.floor(Math.random() * MATRIX_CONFIG.colors.length)]
                    };
                    column.chars.push(newChar);
                }
                
                column.chars.forEach((charObj, index) => {
                    const yPos = column.y - (index * MATRIX_CONFIG.fontSize);
                    
                    if (yPos > -MATRIX_CONFIG.fontSize && yPos < window.innerHeight) {
                        matrixCtx.fillStyle = charObj.color;
                        matrixCtx.fillText(charObj.char, column.x, yPos);
                    }
                });
                
                if (column.chars.length > column.charCount) {
                    column.chars.shift();
                }
            });
            
            if (matrixOverlay.classList.contains('active')) {
                matrixAnimationId = requestAnimationFrame(drawMatrix);
            }
        }
        
        function handleTearEffect() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight;
            const clientHeight = document.documentElement.clientHeight;
            
            const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10;
            const overscroll = Math.max(0, (scrollTop + clientHeight) - scrollHeight);
            
            if (isAtBottom && overscroll > 0) {
                tearForce = Math.min(MAX_TEAR_FORCE, overscroll * 2);
                
                if (tearForce > 5 && !isTearing) {
                    isTearing = true;
                    matrixOverlay.classList.add('active');
                    tearContainer.classList.add('active');
                    tear.classList.add('active');
                    initMatrixEffect();
                }
                
                const tearPosition = 70 - (tearForce / MAX_TEAR_FORCE) * 25;
                tear.style.top = `${tearPosition}%`;
                
            } else {
                tearForce = Math.max(0, tearForce - 8);
                
                if (tearForce <= 0 && isTearing) {
                    isTearing = false;
                    tear.classList.remove('active');
                    
                    setTimeout(() => {
                        matrixOverlay.classList.remove('active');
                        tearContainer.classList.remove('active');
                        
                        if (matrixAnimationId) {
                            cancelAnimationFrame(matrixAnimationId);
                            matrixAnimationId = null;
                        }
                    }, 600);
                } else if (isTearing) {
                    const tearPosition = 70 - (tearForce / MAX_TEAR_FORCE) * 25;
                    tear.style.top = `${tearPosition}%`;
                }
            }
        }
        
        // === INICIALIZACIÓN FINAL ===
        document.addEventListener('DOMContentLoaded', function() {
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
            
            console.log("✅ Galería de Proyectos cargada correctamente");
        });

        window.addEventListener('wheel', function(e) {
            handleTearEffect();
        }, { passive: true });

        window.addEventListener('touchmove', function() {
            handleTearEffect();
        }, { passive: true });

        window.addEventListener('resize', function() {
            if (matrixOverlay.classList.contains('active')) {
                initMatrixEffect();
            }
        });
        
        // Smooth scrolling para enlaces internos
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
